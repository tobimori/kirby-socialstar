(function(){"use strict";function i(){return window.panel}const e=window.Vue;e.computed,e.customRef,e.defineAsyncComponent,e.defineComponent,e.effectScope,e.getCurrentInstance,e.getCurrentScope,e.h,e.inject,e.isProxy,e.isReactive,e.isReadonly,e.isRef,e.isShallow,e.markRaw,e.nextTick,e.onActivated,e.onBeforeMount,e.onBeforeUnmount,e.onBeforeUpdate,e.onDeactivated,e.onErrorCaptured,e.onMounted,e.onRenderTracked,e.onRenderTriggered,e.onScopeDispose,e.onServerPrefetch,e.onUnmounted,e.onUpdated,e.provide,e.proxyRefs,e.reactive,e.readonly;const c=e.ref;e.shallowReactive,e.shallowReadonly,e.shallowRef,e.toRaw,e.toRef,e.toRefs,e.triggerRef,e.unref,e.useAttrs,e.useCssModule,e.useCssVars,e.useListeners,e.useSlots,e.watch,e.watchEffect,e.watchPostEffect,e.watchSyncEffect;const l={name:[Number,String]},d={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function u(n,t,s,a,o,$,b,R){var r=typeof n=="function"?n.options:n;return t&&(r.render=t,r.staticRenderFns=s,r._compiled=!0),{exports:n,options:r}}const _={__name:"InstagramConnector",props:{hasAuthCredentials:Boolean,authUrl:String,userDetails:Object,...l},setup(n){const t=n,s=()=>{window.location.href=t.authUrl},a=i(),o=c(!1);return{__sfc:!0,props:t,openAuthUrl:s,panel:a,isLoading:o,loadNewPosts:()=>{o.value=!0,a.api.get(`${a.view.path}/fields/${t.name}/update`).then(()=>{o.value=!1,a.reload()})},disconnect:()=>{a.dialog.open({component:"k-remove-dialog",props:{text:a.t("socialstar.instagram.disconnectConfirm")},on:{submit:()=>{a.api.get(`${a.view.path}/fields/${t.name}/remove-auth`).then(()=>{a.reload()}),a.dialog.close()}}})},name:l}}};var p=function(){var t=this,s=t._self._c,a=t._self._setupProxy;return t.userDetails?s("k-field",{attrs:{label:"Instagram-Account"}},[s("div",{staticClass:"star-instagram-account"},[s("img",{staticClass:"star-instagram-account_avatar",attrs:{src:t.userDetails.profile_picture_url}}),s("div",{staticClass:"star-instagram-account_content"},[s("a",{staticClass:"star-instagram-account_name",attrs:{href:`https://instagram.com/${t.userDetails.username}`,target:"_blank"}},[s("span",[t._v(t._s(t.userDetails.name))]),s("strong",[t._v("@"+t._s(t.userDetails.username))])]),s("ul",[s("li",[s("k-icon",{attrs:{type:"images"}}),t._v(" "+t._s(t.$t("socialstar.instagram.posts",{count:t.userDetails.media_count}))+" ")],1),s("li",[s("k-icon",{attrs:{type:"users"}}),t._v(" "+t._s(t.$t("socialstar.instagram.followers",{count:t.userDetails.followers_count}))+" ")],1),s("li",[s("k-icon",{attrs:{type:"star-outline"}}),t._v(" "+t._s(t.$t("socialstar.instagram.follows",{count:t.userDetails.follows_count}))+" ")],1)])]),s("div",{staticClass:"star-instagram-account_actions"},[s("k-button",{attrs:{size:"sm",theme:"green",variant:"filled",icon:a.isLoading?"loader":"download",disabled:a.isLoading},on:{click:a.loadNewPosts}},[t._v(" "+t._s(a.isLoading?t.$t("socialstar.loading"):t.$t("socialstar.loadNewPosts"))+" ")]),s("k-button",{attrs:{size:"sm",variant:"filled",theme:"error",icon:"logout"},on:{click:a.disconnect}},[t._v(" "+t._s(t.$t("socialstar.disconnect"))+" ")])],1)])]):s("k-field",t._b({staticClass:"star-connect-account",class:{"has-error":!t.hasAuthCredentials}},"k-field",a.props,!1),[s("div",{staticClass:"star-connect-account_wrapper"},[s("k-icon",{attrs:{type:"instagram"}}),t.hasAuthCredentials?s("span",[t._v(t._s(t.$t("socialstar.instagram.connectAccount")))]):s("span",[t._v(t._s(t.$t("socialstar.instagram.missingApiCredentials")))])],1),s("k-button",{attrs:{size:"sm",variant:"filled",icon:"check",theme:t.hasAuthCredentials?"pink":"error",disabled:!t.hasAuthCredentials},on:{click:a.openAuthUrl}},[t._v(" "+t._s(t.$t("socialstar.connect"))+" ")])],1)},f=[],m=u(_,p,f);const g=m.exports,v={__name:"InstagramPostActions",props:d,setup(n){const t=n,s=i(),a=c(!1);return{__sfc:!0,props:t,panel:s,isLoading:a,reload:()=>{a.value=!0,s.api.get(`${s.view.path}/sections/${t.name}/refresh-data`).then(()=>{s.reload(),a.value=!1})}}}};var h=function(){var t=this,s=t._self._c,a=t._self._setupProxy;return s("k-button",{staticClass:"star-instagram-post-actions",attrs:{disabled:a.isLoading,icon:a.isLoading?"loader":"refresh",variant:"filled"},on:{click:a.reload}},[t._v(" "+t._s(t.$t("socialstar.refresh"))+" ")])},w=[],C=u(v,h,w);const k=C.exports;panel.plugin("tobimori/socialstar",{sections:{"socialstar-instagram-post-actions":k},fields:{"socialstar-instagram-connector":g}})})();
